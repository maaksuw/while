{% extends "layout.html" %}
{% block content %}
    <h1>{{ heading }}</h1>
    <div class="menu">
        <a href="/exerciselist">Tehtävälista</a>
        <a href="/exercise/{{ id }}">Takaisin tehtävään</a>
        {% if session.username %}
        <a href="/submissions/{{ id }}">Omat lähetykset</a>
        {% endif %}
        {% if solved %}
        <a href="/comments/{{ id }}/normal">Kommentit</a>
        {% endif %}
    </div>
    <div class="container">
        <h3>{{ message }}</h3>
        <label>Tehtävän ratkaisseet käyttäjät / tehtävää yrittäneet käyttäjät:</label>
        <p>{{ successful_submissions }}/{{ all_submissions }}</p>
        <label>Viimeisin lähetys vastaanotettu:</label>
        <p>{{ newest_submission_date.strftime("%Y-%m-%d %H:%M:%S") }}</p>
    </div>
    <div class="comments">
        <h3>Kommentit</h3>
        {% for comment in comments %}
        <p>{{ comment[1] }} at {{ comment[2].strftime("%Y-%m-%d %H:%M:%S") }}</p>
        <p>{{ comment[0] }}</p>
        <br>
        {% endfor %}
        <form action="/comments/{{ id }}" method="POST">
            <div class="form-group">
                <h5>Uusi kommentti</h5>
                <textarea name="comment" rows="5" cols="50" maxlength="500"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Lähetä</button>
        </form>
    </div>
{% endblock %}
